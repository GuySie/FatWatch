<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>FatWatch (__NAME__)</title>
		<script language="Javascript" type="text/javascript">
			function onChange() {
				var theForm = document.forms['import'];
				theForm.elements['sendbutton'].disabled = ! (theForm.elements['filedata'].value);
			}
		</script>
	</head>
	<body onload="onChange();">
		<h1>FatWatch on __NAME__</h1>
		<p>
			Wi-Fi Import/Export allows you to transfer weight measurements to and from FatWatch through your computer's web browser.  No special software is required.
		</p>
		<p>
			FatWatch uses <a href="http://en.wikipedia.org/wiki/Comma-separated_values">comma separated values</a> (CSV) as its file format for import and export.  CSV files are supported by many common applications.
		</p>
		<p>
			The columns used are Date, Weight, Checkmark, Note.  For the Checkmark column, 1 indicates a checkmark on that date, 0 indicates no check.  When importing only the first two columns (Date and Weight) are required.
		</p>
	
		<h1>Export</h1>
		
		<p>
			You can retrieve the weight data from your iPhone by clicking the following link.
		</p>
		
		<p>
			<a href="/export/weight.csv">Download Weight Data</a>
		</p>
	
		<h1>Import</h1>
		
		<form name="import" method="POST" enctype="multipart/form-data" action="/import">
			<!-- add a hidden field with some random data, check for it on submit; this will require somebody fetch the page before submitting the form -->
			<p>
				You can send data to your iPhone using this form.  First, select a data file.
			</p>
			<p>
				<input type="file" name="filedata" accept="text/csv,text/plain" onchange="onChange();"/>
			</p>
			<p>
				Existing data can be merged or replaced with the data from your file.
			</p>
			<dl>
				<dt>
					<input type="radio" name="how" value="merge" id="merge_button" checked="true"/>
					<label for="merge_button">Merge with existing data.</label>
				</dt>
				<dd>
					If the file and the iPhone have different measurements for the same date, the measurement in the file will replace the measurement on the iPhone.  Otherwise, any existing measurements on your iPhone will be left alone.
				</dd>
				<dt>
					<input type="radio" name="how" value="replace" id="replace_button"/>
					<label for="replace_button">Replace existing data.</label>
				</dt>
				<dd>
					All weight measurements on your iPhone will be deleted and the measurements in your file will take their place.
				</dd>
			</dl>
			<div>
				<input type="submit" name="sendbutton" value="Send to iPhone"/>
			</div>
		</form>
	</body>
</html>